<?xml version="1.0" encoding="UTF-8"?>
<svg width="800" height="520" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <!-- Background Gradient -->
    <linearGradient id="bg-grad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#0f172a;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#1e293b;stop-opacity:1" />
    </linearGradient>

    <!-- Glow filters -->
    <filter id="glow-green" x="-50%" y="-50%" width="200%" height="200%">
      <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
      <feMerge>
        <feMergeNode in="coloredBlur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
    <filter id="glow-blue" x="-50%" y="-50%" width="200%" height="200%">
      <feGaussianBlur stdDeviation="2" result="coloredBlur"/>
      <feMerge>
        <feMergeNode in="coloredBlur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>

    <!-- Arrow markers -->
    <marker id="arrow-green" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#4ade80" />
    </marker>
    <marker id="arrow-amber" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#fbbf24" />
    </marker>
    <marker id="arrow-red" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#f87171" />
    </marker>
    <marker id="arrow-blue" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#60a5fa" />
    </marker>
  </defs>

  <!-- Background -->
  <rect width="100%" height="100%" fill="url(#bg-grad)" rx="10" />

  <!-- Title -->
  <text x="400" y="35" font-family="Arial, sans-serif" font-size="18" fill="#f8fafc" text-anchor="middle" font-weight="bold">Data Model: Content‚ÄìPath Separation</text>
  <text x="400" y="55" font-family="Arial, sans-serif" font-size="12" fill="#64748b" text-anchor="middle">Content and access paths stored separately, enabling version control, multi-entry aliases, and safe deletion</text>

  <!-- ================================================================== -->
  <!-- PATHS TABLE (Left) -->
  <!-- ================================================================== -->
  <g transform="translate(50, 80)">
    <!-- Table frame -->
    <rect x="0" y="0" width="300" height="240" rx="8" fill="#1e293b" stroke="#60a5fa" stroke-width="2" filter="url(#glow-blue)"/>

    <!-- Table header -->
    <rect x="0" y="0" width="300" height="36" rx="8" fill="#1e3a5f"/>
    <rect x="0" y="20" width="300" height="16" fill="#1e3a5f"/>
    <text x="150" y="24" font-family="'Courier New', monospace" font-size="15" fill="#93c5fd" text-anchor="middle" font-weight="bold">paths</text>

    <!-- Column headers -->
    <text x="15" y="58" font-family="'Courier New', monospace" font-size="11" fill="#94a3b8">domain</text>
    <text x="90" y="58" font-family="'Courier New', monospace" font-size="11" fill="#94a3b8">path</text>
    <text x="195" y="58" font-family="'Courier New', monospace" font-size="11" fill="#94a3b8">memory_id</text>
    <text x="270" y="58" font-family="'Courier New', monospace" font-size="11" fill="#94a3b8">pri</text>
    <line x1="10" y1="64" x2="290" y2="64" stroke="#334155" stroke-width="1"/>

    <!-- Row 1: core://agent -->
    <text x="15" y="82" font-family="'Courier New', monospace" font-size="11" fill="#60a5fa">core</text>
    <text x="90" y="82" font-family="'Courier New', monospace" font-size="11" fill="#e2e8f0">agent</text>
    <text x="215" y="82" font-family="'Courier New', monospace" font-size="11" fill="#4ade80" font-weight="bold">42</text>
    <text x="272" y="82" font-family="'Courier New', monospace" font-size="11" fill="#fbbf24">0</text>

    <!-- Row 2: core://agent/my_user -->
    <text x="15" y="102" font-family="'Courier New', monospace" font-size="11" fill="#60a5fa">core</text>
    <text x="90" y="102" font-family="'Courier New', monospace" font-size="11" fill="#e2e8f0">agent/my_user</text>
    <text x="215" y="102" font-family="'Courier New', monospace" font-size="11" fill="#c084fc" font-weight="bold">57</text>
    <text x="272" y="102" font-family="'Courier New', monospace" font-size="11" fill="#fbbf24">0</text>

    <!-- Row 3: core://my_user (alias í same memory!) -->
    <text x="15" y="122" font-family="'Courier New', monospace" font-size="11" fill="#60a5fa">core</text>
    <text x="90" y="122" font-family="'Courier New', monospace" font-size="11" fill="#fbbf24">my_user</text>
    <text x="215" y="122" font-family="'Courier New', monospace" font-size="11" fill="#c084fc" font-weight="bold">57</text>
    <text x="272" y="122" font-family="'Courier New', monospace" font-size="11" fill="#fbbf24">1</text>

    <!-- Row 4: writer://novel -->
    <text x="15" y="142" font-family="'Courier New', monospace" font-size="11" fill="#a78bfa">writer</text>
    <text x="90" y="142" font-family="'Courier New', monospace" font-size="11" fill="#e2e8f0">novel/ch1</text>
    <text x="215" y="142" font-family="'Courier New', monospace" font-size="11" fill="#fb923c" font-weight="bold">89</text>
    <text x="272" y="142" font-family="'Courier New', monospace" font-size="11" fill="#fbbf24">2</text>

    <!-- Separator -->
    <line x1="10" y1="155" x2="290" y2="155" stroke="#334155" stroke-width="1" stroke-dasharray="3,3"/>
    <text x="150" y="172" font-family="Arial, sans-serif" font-size="10" fill="#64748b" text-anchor="middle">Each row = one URI entry point</text>
    <text x="150" y="186" font-family="Arial, sans-serif" font-size="10" fill="#64748b" text-anchor="middle">priority + disclosure live here</text>
    <text x="150" y="200" font-family="Arial, sans-serif" font-size="10" fill="#fbbf24" text-anchor="middle">ë Same memory_id = Alias (not a copy)</text>

    <!-- Key badge -->
    <rect x="10" y="212" width="60" height="18" rx="4" fill="#1e3a5f" stroke="#60a5fa" stroke-width="1"/>
    <text x="40" y="225" font-family="Arial, sans-serif" font-size="10" fill="#93c5fd" text-anchor="middle">PK</text>
    <text x="80" y="225" font-family="Arial, sans-serif" font-size="10" fill="#94a3b8">(domain, path)</text>
  </g>

  <!-- ================================================================== -->
  <!-- MEMORIES TABLE (Right) -->
  <!-- ================================================================== -->
  <g transform="translate(470, 80)">
    <!-- Table frame -->
    <rect x="0" y="0" width="280" height="240" rx="8" fill="#1e293b" stroke="#4ade80" stroke-width="2" filter="url(#glow-green)"/>

    <!-- Table header -->
    <rect x="0" y="0" width="280" height="36" rx="8" fill="#14332a"/>
    <rect x="0" y="20" width="280" height="16" fill="#14332a"/>
    <text x="140" y="24" font-family="'Courier New', monospace" font-size="15" fill="#86efac" text-anchor="middle" font-weight="bold">memories</text>

    <!-- Column headers -->
    <text x="20" y="58" font-family="'Courier New', monospace" font-size="11" fill="#94a3b8">id</text>
    <text x="60" y="58" font-family="'Courier New', monospace" font-size="11" fill="#94a3b8">content</text>
    <text x="175" y="58" font-family="'Courier New', monospace" font-size="11" fill="#94a3b8">deprecated</text>
    <text x="248" y="58" font-family="'Courier New', monospace" font-size="11" fill="#94a3b8">í</text>
    <line x1="10" y1="64" x2="270" y2="64" stroke="#334155" stroke-width="1"/>

    <!-- Row 1: id=41 (deprecated old version) -->
    <text x="20" y="82" font-family="'Courier New', monospace" font-size="11" fill="#f87171">41</text>
    <text x="60" y="82" font-family="'Courier New', monospace" font-size="11" fill="#64748b" text-decoration="line-through">(old version)</text>
    <text x="195" y="82" font-family="'Courier New', monospace" font-size="11" fill="#f87171">true</text>
    <text x="248" y="82" font-family="'Courier New', monospace" font-size="11" fill="#f87171">í42</text>

    <!-- Row 2: id=42 (current, pointed to by path) -->
    <text x="20" y="102" font-family="'Courier New', monospace" font-size="11" fill="#4ade80" font-weight="bold">42</text>
    <text x="60" y="102" font-family="'Courier New', monospace" font-size="11" fill="#e2e8f0">I am Nocturne...</text>
    <text x="195" y="102" font-family="'Courier New', monospace" font-size="11" fill="#94a3b8">false</text>
    <text x="252" y="102" font-family="'Courier New', monospace" font-size="11" fill="#94a3b8">‚Äî</text>

    <!-- Row 3: id=57 -->
    <text x="20" y="122" font-family="'Courier New', monospace" font-size="11" fill="#c084fc" font-weight="bold">57</text>
    <text x="60" y="122" font-family="'Courier New', monospace" font-size="11" fill="#e2e8f0">Salem is my...</text>
    <text x="195" y="122" font-family="'Courier New', monospace" font-size="11" fill="#94a3b8">false</text>
    <text x="252" y="122" font-family="'Courier New', monospace" font-size="11" fill="#94a3b8">‚Äî</text>

    <!-- Row 4: id=89 -->
    <text x="20" y="142" font-family="'Courier New', monospace" font-size="11" fill="#fb923c" font-weight="bold">89</text>
    <text x="60" y="142" font-family="'Courier New', monospace" font-size="11" fill="#e2e8f0">Chapter 1: The...</text>
    <text x="195" y="142" font-family="'Courier New', monospace" font-size="11" fill="#94a3b8">false</text>
    <text x="252" y="142" font-family="'Courier New', monospace" font-size="11" fill="#94a3b8">‚Äî</text>

    <!-- Separator -->
    <line x1="10" y1="155" x2="270" y2="155" stroke="#334155" stroke-width="1" stroke-dasharray="3,3"/>
    <text x="140" y="172" font-family="Arial, sans-serif" font-size="10" fill="#64748b" text-anchor="middle">Each row = one memory content entity</text>
    <text x="140" y="186" font-family="Arial, sans-serif" font-size="10" fill="#64748b" text-anchor="middle">Content stored once, unaware of references</text>
    <text x="140" y="200" font-family="Arial, sans-serif" font-size="10" fill="#f87171" text-anchor="middle">ë deprecated = old version (not deleted)</text>

    <!-- Key badge -->
    <rect x="10" y="212" width="60" height="18" rx="4" fill="#14332a" stroke="#4ade80" stroke-width="1"/>
    <text x="40" y="225" font-family="Arial, sans-serif" font-size="10" fill="#86efac" text-anchor="middle">PK</text>
    <text x="80" y="225" font-family="Arial, sans-serif" font-size="10" fill="#94a3b8">id (auto)</text>
  </g>

  <!-- ================================================================== -->
  <!-- FK ARROWS: paths.memory_id í memories.id -->
  <!-- ================================================================== -->

  <!-- Arrow: path "agent" í memory 42 (now row 2 at y=102+80=182) -->
  <line x1="350" y1="157" x2="490" y2="177" stroke="#4ade80" stroke-width="1.5" marker-end="url(#arrow-green)" stroke-dasharray="5,3" opacity="0.7"/>

  <!-- Arrow: path "agent/my_user" í memory 57 -->
  <line x1="350" y1="177" x2="490" y2="197" stroke="#c084fc" stroke-width="1.5" marker-end="url(#arrow-blue)" stroke-dasharray="5,3" opacity="0.7"/>

  <!-- Arrow: path "my_user" (alias) í memory 57 (same!) -->
  <line x1="350" y1="197" x2="490" y2="197" stroke="#c084fc" stroke-width="1.5" marker-end="url(#arrow-blue)" stroke-dasharray="5,3" opacity="0.7"/>

  <!-- Arrow: path "novel/ch1" í memory 89 -->
  <line x1="350" y1="217" x2="490" y2="217" stroke="#fb923c" stroke-width="1.5" marker-end="url(#arrow-amber)" stroke-dasharray="5,3" opacity="0.7"/>

  <!-- FK label -->
  <text x="420" y="147" font-family="'Courier New', monospace" font-size="10" fill="#94a3b8" text-anchor="middle">memory_id í</text>

  <!-- ================================================================== -->
  <!-- BOTTOM: Three benefits -->
  <!-- ================================================================== -->

  <!-- Benefit 1: Version Control -->
  <g transform="translate(50, 355)">
    <rect x="0" y="0" width="220" height="140" rx="8" fill="#1e293b" stroke="#f87171" stroke-width="1.5" opacity="0.9"/>
    <text x="110" y="25" font-family="Arial, sans-serif" font-size="13" fill="#fca5a5" text-anchor="middle" font-weight="bold">üõ°Ô∏è Version Control</text>
    <line x1="15" y1="34" x2="205" y2="34" stroke="#334155" stroke-width="1"/>

    <text x="15" y="55" font-family="Arial, sans-serif" font-size="11" fill="#cbd5e1">update_memory doesn't delete</text>
    <text x="15" y="72" font-family="Arial, sans-serif" font-size="11" fill="#cbd5e1">old versions ‚Äî it marks them</text>
    <text x="15" y="89" font-family="Arial, sans-serif" font-size="11" fill="#cbd5e1">deprecated, points path to new.</text>
    <text x="15" y="112" font-family="Arial, sans-serif" font-size="11" fill="#fca5a5" font-weight="bold">í Humans can rollback anytime</text>
    <text x="15" y="129" font-family="Arial, sans-serif" font-size="11" fill="#fca5a5" font-weight="bold">í AI edits boldly, you backstop</text>
  </g>

  <!-- Benefit 2: Multi-Entry Alias -->
  <g transform="translate(290, 355)">
    <rect x="0" y="0" width="220" height="140" rx="8" fill="#1e293b" stroke="#fbbf24" stroke-width="1.5" opacity="0.9"/>
    <text x="110" y="25" font-family="Arial, sans-serif" font-size="13" fill="#fde68a" text-anchor="middle" font-weight="bold">üï∏Ô∏è Multi-Entry Alias</text>
    <line x1="15" y1="34" x2="205" y2="34" stroke="#334155" stroke-width="1"/>

    <text x="15" y="55" font-family="Arial, sans-serif" font-size="11" fill="#cbd5e1">Same memory can be referenced</text>
    <text x="15" y="72" font-family="Arial, sans-serif" font-size="11" fill="#cbd5e1">by multiple paths, each with</text>
    <text x="15" y="89" font-family="Arial, sans-serif" font-size="11" fill="#cbd5e1">independent priority &amp; disclosure.</text>
    <text x="15" y="112" font-family="Arial, sans-serif" font-size="11" fill="#fde68a" font-weight="bold">í Content stored only once</text>
    <text x="15" y="129" font-family="Arial, sans-serif" font-size="11" fill="#fde68a" font-weight="bold">í Unlimited entry points</text>
  </g>

  <!-- Benefit 3: Safe Delete -->
  <g transform="translate(530, 355)">
    <rect x="0" y="0" width="220" height="140" rx="8" fill="#1e293b" stroke="#4ade80" stroke-width="1.5" opacity="0.9"/>
    <text x="110" y="25" font-family="Arial, sans-serif" font-size="13" fill="#86efac" text-anchor="middle" font-weight="bold">üîí Safe Deletion</text>
    <line x1="15" y1="34" x2="205" y2="34" stroke="#334155" stroke-width="1"/>

    <text x="15" y="55" font-family="Arial, sans-serif" font-size="11" fill="#cbd5e1">AI's MCP tool delete_memory</text>
    <text x="15" y="72" font-family="Arial, sans-serif" font-size="11" fill="#cbd5e1">can only sever a path ‚Äî it</text>
    <text x="15" y="89" font-family="Arial, sans-serif" font-size="11" fill="#cbd5e1">cannot touch the content itself.</text>
    <text x="15" y="112" font-family="Arial, sans-serif" font-size="11" fill="#86efac" font-weight="bold">í AI cannot truly destroy memories</text>
    <text x="15" y="129" font-family="Arial, sans-serif" font-size="11" fill="#86efac" font-weight="bold">í Humans purge via Dashboard</text>
  </g>

</svg>
